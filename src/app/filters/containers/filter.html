<form [formGroup]="filterForm" novalidate>
  <h5 [ngStyle]="{'margin': closedFilterView ? '0' : '10px'}" (click)="toggleFilterView('affiliations')" class="expandable">
    <mat-icon class="small-icon">{{closedFilterView('affiliations') ? 'arrow_drop_down' : 'arrow_drop_up'}}</mat-icon>
    Affiliations
  </h5>
  <div formGroupName="affiliations" *ngIf="closedFilterView('affiliations')">
    <ul>
      <li *ngFor="let a of serialiseObjectAsArray(affiliations)">
        <mat-checkbox [formControlName]="a.key" (change)="setPostPristineFilter('affiliations', a.key)">
          {{affiliationsMetadata[a.key].title}} ({{affiliationsMetadata[a.key].count}})
        </mat-checkbox>
      </li>
    </ul>
  </div>
  <h5 [ngStyle]="{'margin': closedFilterView ? '0' : '10px'}" (click)="toggleFilterView('periods')" class="expandable">
    <mat-icon class="small-icon">{{closedFilterView('periods') ? 'arrow_drop_down' : 'arrow_drop_up'}}</mat-icon>
    Periods
  </h5>
  <div formGroupName="periods" *ngIf="closedFilterView('periods')">
    <ul>
      <li *ngFor="let p of serialiseObjectAsArray(periods)">
        <mat-checkbox [formControlName]="p.key" (change)="setPostPristineFilter('periods', p.key)">
          {{periodsMetadata[p.key].title}} ({{periodsMetadata[p.key].count}})
        </mat-checkbox>
      </li>
    </ul>
  </div>
</form>
